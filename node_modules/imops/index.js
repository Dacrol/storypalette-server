var impl = require(__dirname + "/build/Release/imops.node")

impl.format         = {};
impl.format.UNKNOWN = -1;
impl.format.BMP     = 0;
impl.format.ICO     = 1;
impl.format.JPEG    = 2;
impl.format.JNG     = 3;
impl.format.KOALA   = 4;
impl.format.LBM     = 5;
impl.format.IFF     = 5;
impl.format.MNG     = 6;
impl.format.PBM     = 7;
impl.format.PBMRAW  = 8;
impl.format.PCD     = 9;
impl.format.PCX     = 10;
impl.format.PGM     = 11;
impl.format.PGMRAW  = 12;
impl.format.PNG     = 13;
impl.format.PPM     = 14;
impl.format.PPMRAW  = 15;
impl.format.RAS     = 16;
impl.format.TARGA   = 17;
impl.format.TIFF    = 18;
impl.format.WBMP    = 19;
impl.format.PSD     = 20;
impl.format.CUT     = 21;
impl.format.XBM     = 22;
impl.format.XPM     = 23;
impl.format.DDS     = 24;
impl.format.GIF     = 25;
impl.format.HDR     = 26;
impl.format.FAXG3   = 27;
impl.format.SGI     = 28;
impl.format.EXR     = 29;
impl.format.J2K     = 30;
impl.format.JP2     = 31;
impl.format.PFM     = 32;
impl.format.PICT    = 33;
impl.format.RAW     = 34;

impl.format.supported = [
    'bmp', 'ico', 'jpeg', 'jpg',
    'jng', 'koala', 'lbm', 'iff', 
    'mng', 'pbm', 'pcd', 'pcx',
    'pgm', 'png', 'ppm', 'ras',
    'targa', 'tga', 'tif', 'tiff',
    'wbmp', 'psd', 'cut', 'xbm',
    'xpm', 'dds', 'gif', 'hdr',
    'faxg3', 'sgi', 'exr', 'j2k',
    'jp2', 'pfm', 'pict', 'raw'
];

impl.type         = {};
impl.type.UNKNOWN = 0;
impl.type.BITMAP  = 1;
impl.type.UINT16  = 2;
impl.type.INT16	  = 3;
impl.type.UINT32  = 4;
impl.type.INT32	  = 5;
impl.type.FLOAT	  = 6;
impl.type.DOUBLE  = 7;
impl.type.COMPLEX = 8;
impl.type.RGB16	  = 9;
impl.type.RGBA16  = 10;
impl.type.RGBF	  = 11;
impl.type.RGBAF	  = 12;

impl.filter            = {};
impl.filter.BOX		   = 0;
impl.filter.BICUBIC	   = 1;
impl.filter.BILINEAR   = 2;
impl.filter.BSPLINE	   = 3;
impl.filter.CATMULLROM = 4;
impl.filter.LANCZOS3   = 5;

impl.metadata                = {};
impl.metadata.NODATA		 = -1;
impl.metadata.COMMENTS		 = 0;
impl.metadata.EXIF_MAIN		 = 1;
impl.metadata.EXIF_EXIF		 = 2;
impl.metadata.EXIF_GPS	     = 3;
impl.metadata.EXIF_MAKERNOTE = 4;
impl.metadata.EXIF_INTEROP	 = 5;
impl.metadata.IPTC			 = 6;
impl.metadata.XMP			 = 7;
impl.metadata.GEOTIFF		 = 8;
impl.metadata.ANIMATION		 = 9;
impl.metadata.CUSTOM	     = 10;
impl.metadata.EXIF_RAW		 = 11;

impl.supported = function(path) {
    var i,ext;
    try {
        ext = path.split('/').pop().split('.').pop().toLowerCase();
        for (i=0 ; i < impl.format.supported.length ; i++)
            if (impl.format.supported[i] == ext)
                return true;
    } catch (ignored) {}
    return false;
}

impl.read = function(path) {
    var img = new impl.image();
    if (!img.read(path))
        return null;
    return img;
}

impl.write = function(path, img) {
    if (img == null)
        return false;
    return img.write(path);
}

module.exports=impl;
