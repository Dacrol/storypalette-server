{
    "targets": [
        {
            "target_name": "imops",
            "variables": {
                'node_version': '<!(node --version | sed -e "s/^v\([0-9]*\\.[0-9]*\).*$/\\1/")'
            },
            "sources": [         
                "src/image.cpp",
            ],
            "conditions": [
                ['OS=="mac"',
                    {
                        'include_dirs': [
                            "/opt/local/include",
			    "/usr/local/include"
                        ],
                        "link_settings": {
                            'libraries': [
				"-L/opt/local/lib",
				"-L/usr/local/lib",
				"-lfreeimage"
			]
                        },
                    }
                ],
                ['OS=="linux"',
                    {
                        'include_dirs': [
                            "/usr/include"
                        ],
                        'link_settings': {
                            'libraries': ["-lfreeimage"]
                        }
                    }
                ]
            ],
            "target_conditions": [
                ['node_version=="0.8"', { 'defines': ['NODE_TARGET_VERSION=8'] } ]
            ]
        }
    ]
}
